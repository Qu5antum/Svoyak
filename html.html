<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Айгүл - 50 жас</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --bg-color: #fdfbf7;
            --gold: #c5a059;
            --gold-dark: #8a6e3e;
            --text: #2c2c2c;
        }
        
        * { box-sizing: border-box; }

        body {
            font-family: 'Cormorant Garamond', serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0; padding: 0; text-align: center; overflow-x: hidden;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0 C 45 15, 45 45, 30 60 C 15 45, 15 15, 30 0' fill='none' stroke='%23c5a059' stroke-opacity='0.05'/%3E%3C/svg%3E");
        }

        .fade-up { opacity: 0; transform: translateY(40px); transition: 1s ease; }
        .visible { opacity: 1; transform: translateY(0); }
        @keyframes spin { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }

        .container {
            max-width: 500px; margin: 0 auto; background: #fff;
            box-shadow: 0 0 30px rgba(197, 160, 89, 0.15);
            position: relative; overflow: hidden; padding-bottom: 50px;
        }

        .corner-ornament {
            position: absolute; width: 120px; height: 120px;
            background-size: contain; background-repeat: no-repeat;
            opacity: 0.8; pointer-events: none; z-index: 99;
        }
        .top-left { top: 0; left: 0; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M0 0 L50 0 Q20 10 10 20 Q0 50 0 100 Z' fill='%23c5a059'/%3E%3Cpath d='M5 5 Q40 5 40 40 Q5 40 5 5' fill='white'/%3E%3C/svg%3E"); }
        .top-right { top: 0; right: 0; transform: scaleX(-1); background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M0 0 L50 0 Q20 10 10 20 Q0 50 0 100 Z' fill='%23c5a059'/%3E%3Cpath d='M5 5 Q40 5 40 40 Q5 40 5 5' fill='white'/%3E%3C/svg%3E"); }

        .hero { padding: 80px 0 50px; position: relative; }
        .hero-center { position: relative; width: 300px; height: 300px; margin: 0 auto; }
        .spinning-ornament {
            position: absolute; top: 50%; left: 50%; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='300' height='300' viewBox='0 0 300 300' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='150' cy='150' r='140' stroke='%23c5a059' stroke-width='2' fill='none'/%3E%3Ccircle cx='150' cy='150' r='120' stroke='%23c5a059' stroke-width='1' fill='none' stroke-dasharray='10 5'/%3E%3Cpath d='M150 20 Q180 20 180 50 T150 80 T120 50 T150 20' fill='none' stroke='%23c5a059' stroke-width='2'/%3E%3Cpath d='M150 280 Q180 280 180 250 T150 220 T120 250 T150 280' fill='none' stroke='%23c5a059' stroke-width='2'/%3E%3Cpath d='M20 150 Q20 180 50 180 T80 150 T50 120 T20 150' fill='none' stroke='%23c5a059' stroke-width='2'/%3E%3Cpath d='M280 150 Q280 180 250 180 T220 150 T250 120 T280 150' fill='none' stroke='%23c5a059' stroke-width='2'/%3E%3C/svg%3E");
            background-size: contain; background-repeat: no-repeat;
            animation: spin 20s linear infinite;
        }
        .hero-text {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.9); width: 140px; height: 140px;
            border-radius: 50%; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            box-shadow: 0 0 20px rgba(197, 160, 89, 0.2); border: 2px solid var(--gold);
        }
        .hero-text h1 { font-size: 70px; color: var(--gold); margin: 0; line-height: 0.9; }
        .hero-text span { font-size: 14px; letter-spacing: 2px; text-transform: uppercase; color: #888; }
        .main-name { font-size: 60px; font-style: italic; color: #000; margin-top: 20px; }
        .divider-ornament {
            height: 30px; background-image: url("data:image/svg+xml,%3Csvg width='100' height='30' viewBox='0 0 100 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 15 Q 25 0, 50 15 T 100 15' fill='none' stroke='%23c5a059' stroke-width='2'/%3E%3C/svg%3E");
            background-repeat: repeat-x; background-position: center; margin: 30px auto; width: 80%; opacity: 0.6;
        }
        .card {
            background: #fff; margin: 20px; padding: 30px 20px;
            border: 1px solid rgba(197, 160, 89, 0.3); border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.02); position: relative;
        }
        .card::before { content: ''; position: absolute; top: 5px; left: 5px; right: 5px; bottom: 5px; border: 1px solid var(--gold); border-radius: 8px; pointer-events: none; }
        
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; font-family: 'Montserrat', sans-serif; font-size: 14px; margin-top: 15px; }
        .wk { color: var(--gold-dark); font-size: 11px; font-weight: bold; }
        .dy { padding: 8px 0; }
        .active-date { background: var(--gold); color: #fff; border-radius: 50%; position: relative; box-shadow: 0 0 10px var(--gold); }

        .rsvp { background: #faf8f0; border-top: 2px solid var(--gold); padding: 40px 20px; }
        input[type="text"] { width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 5px; font-family: 'Montserrat'; margin-bottom: 20px; }
        button { background: var(--gold); color: #fff; padding: 15px; width: 100%; border: none; border-radius: 50px; font-size: 16px; text-transform: uppercase; cursor: pointer; transition: 0.3s; }
        button:hover { background: var(--gold-dark); transform: translateY(-2px); }

        .music-btn { position: fixed; bottom: 25px; right: 25px; width: 50px; height: 50px; background: #fff; border: 2px solid var(--gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--gold); font-size: 20px; z-index: 100; box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer; }
        .spin-music { animation: rotateMusic 4s linear infinite; }
        @keyframes rotateMusic { 100% { transform: rotate(360deg); } }

        /* Messages */
        #loader { display: none; color: #888; margin-top: 10px; }
        #success-msg { display: none; color: var(--gold-dark); font-weight: bold; margin-top: 20px; line-height: 1.5; font-size: 18px; }
        #error-msg { display: none; color: red; margin-top: 10px; }

    </style>
</head>
<body onclick="playOnFirstClick()">

    <audio id="audio" loop autoplay>
        <source src="Al Bano & Romina Power - Felicità.mp3" type="audio/mpeg">
    </audio>
    
    <div class="music-btn" onclick="toggleAudio(event)">
        <i class="fas fa-music"></i>
    </div>

    <div class="container">
        <div class="corner-ornament top-left"></div>
        <div class="corner-ornament top-right"></div>

        <div class="hero fade-up">
            <div class="hero-center">
                <div class="spinning-ornament"></div>
                <div class="hero-text">
                    <h1>50</h1>
                    <span>ЖАС</span>
                </div>
            </div>
            <div class="main-name">Айгүл</div>
            <div style="font-family: 'Montserrat'; letter-spacing: 4px; text-transform: uppercase; font-size: 14px; color: #666; margin-top: 10px;">Мерей той</div>
        </div>

        <div class="divider-ornament"></div>

        <div class="card fade-up">
            <h2 style="font-style: italic; color: var(--gold-dark);">Құрметті қонақтар!</h2>
            <p style="font-size: 18px; line-height: 1.6; color: #555;">Сіздерді <strong>50 жас</strong> мерей тойыма арналған ақ дастарханымыздың қадірлі қонағы болуға шақырамыз!</p>
        </div>

        <div class="card fade-up">
            <h2 style="font-style: italic;">Той күні</h2>
            <div style="font-size: 24px; text-transform: uppercase; margin-bottom: 10px;">19 Ақпан 2026</div>
            <div style="font-size: 14px; color: #888;">Бейсенбі (Четверг)</div>

            <div class="calendar-wrapper">
                <div class="calendar-grid">
                    <div class="wk">ДС</div><div class="wk">СС</div><div class="wk">СР</div><div class="wk">БС</div><div class="wk">ЖМ</div><div class="wk">СБ</div><div class="wk">ЖС</div>
                    <div></div><div></div><div></div><div></div><div></div><div></div><div class="dy">1</div>
                    <div class="dy">2</div><div class="dy">3</div><div class="dy">4</div><div class="dy">5</div><div class="dy">6</div><div class="dy">7</div><div class="dy">8</div>
                    <div class="dy">9</div><div class="dy">10</div><div class="dy">11</div><div class="dy">12</div><div class="dy">13</div><div class="dy">14</div><div class="dy">15</div>
                    <div class="dy">16</div><div class="dy">17</div><div class="dy">18</div><div class="dy active-date">19</div><div class="dy">20</div><div class="dy">21</div><div class="dy">22</div>
                    <div class="dy">23</div><div class="dy">24</div><div class="dy">25</div><div class="dy">26</div><div class="dy">27</div><div class="dy">28</div>
                </div>
            </div>
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
                <div><span id="d" style="font-size:24px; font-weight:bold; color:var(--gold);">00</span><br><span style="font-size:10px;">КҮН</span></div>
                <div><span id="h" style="font-size:24px; font-weight:bold; color:var(--gold);">00</span><br><span style="font-size:10px;">САҒАТ</span></div>
                <div><span id="m" style="font-size:24px; font-weight:bold; color:var(--gold);">00</span><br><span style="font-size:10px;">МИНУТ</span></div>
            </div>
        </div>

        <div class="divider-ornament"></div>

        <div class="card fade-up" style="text-align: left;">
            <h2 style="text-align: center; font-style: italic; margin-bottom: 20px;">Бағдарлама</h2>
            <div style="display: flex; margin-bottom: 20px;">
                <div style="font-weight: bold; color: var(--gold); width: 60px;">17:00</div>
                <div style="border-left: 1px solid #ddd; padding-left: 15px;">Қонақтардың жиналуы</div>
            </div>
            <div style="display: flex; margin-bottom: 20px;">
                <div style="font-weight: bold; color: var(--gold); width: 60px;">17:30</div>
                <div style="border-left: 1px solid #ddd; padding-left: 15px;">Фотосессия</div>
            </div>
            <div style="display: flex; margin-bottom: 20px;">
                <div style="font-weight: bold; color: var(--gold); width: 60px;">18:00</div>
                <div style="border-left: 1px solid #ddd; padding-left: 15px;">Тойдың басталуы</div>
            </div>
        </div>

        <div class="card fade-up">
            <i class="fas fa-map-marked-alt" style="font-size: 40px; color: var(--gold); margin-bottom: 15px;"></i>
            <h3>Janym Soul</h3>
            <p>​Караоке-бар</p>
            <p style="color: #666;">Алматы қаласы</p>
            <a href="https://go.2gis.com/YB32Z" style="color: var(--gold); text-decoration: underline;">Картадан ашу</a>
        </div>

        <div class="rsvp fade-up">
            <h3 id="formTitle" style="margin-bottom: 20px;">Тойға келуіңізді растаңыз</h3>
            
            <form id="rsvpForm">
                <input type="text" name="name" placeholder="Аты-жөніңізді жазыңыз..." required>
                
                <div style="text-align: left; margin: 20px 0; font-family: 'Montserrat'; font-size: 14px;">
                    <label style="display:block; margin-bottom:10px;"><input type="radio" name="status" value="Келемін" checked> Иә, келемін</label>
                    <label style="display:block; margin-bottom:10px;"><input type="radio" name="status" value="Жұбайыммен"> Жұбайыммен келемін</label>
                    <label style="display:block;"><input type="radio" name="status" value="Келе алмаймын"> Өкінішке орай, келе алмаймын</label>
                </div>

                <button type="submit">ЖІБЕРУ</button>
            </form>
            
            <div id="loader">Жіберілуде...</div>
            <div id="success-msg">
                <i class="fas fa-check-circle" style="font-size: 40px; color: var(--gold); margin-bottom: 10px;"></i><br>
                Рахмет! Жауабыңыз қабылданды.<br>
                <span style="font-size: 14px; font-weight: normal; color: #555;">Сіз тіркеліп қойғансыз.</span>
            </div>
            <div id="error-msg">Қате шықты! Интернетті тексеріп, қайта көріңіз.</div>
        </div>

        <footer style="padding: 40px; color: #aaa; font-size: 12px;">
            <p>Sizderdi asyga kutemiz!</p>
        </footer>
    </div>

    <script>
        // 1. ПРОВЕРКА (Бұрын тіркелген бе?)
        window.onload = function() {
            if(localStorage.getItem('isSubmitted') === 'true') {
                document.getElementById('rsvpForm').style.display = 'none';
                document.getElementById('formTitle').style.display = 'none';
                document.getElementById('success-msg').style.display = 'block';
            }
            
            // Попытка автозапуска
            attemptPlay();
        }

        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => { if(entry.isIntersecting) entry.target.classList.add('visible'); });
        });
        document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));

        const dest = new Date("Feb 19, 2026 18:00:00").getTime();
        setInterval(() => {
            const now = new Date().getTime(); const diff = dest - now; if(diff <= 0) return;
            document.getElementById("d").innerText = Math.floor(diff / (1000*60*60*24));
            document.getElementById("h").innerText = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
            document.getElementById("m").innerText = Math.floor((diff % (1000*60*60)) / (1000*60));
        }, 1000);

        // Логика музыки
        function attemptPlay() {
            const aud = document.getElementById("audio");
            const btn = document.querySelector(".music-btn");
            
            var promise = aud.play();
            if (promise !== undefined) {
                promise.then(_ => {
                    // Автозапуск сработал
                    btn.classList.add("spin-music");
                    btn.innerHTML = '<i class="fas fa-pause"></i>';
                }).catch(error => {
                    // Автозапуск заблокирован браузером
                    console.log("Автозапуск заблокирован, ждем клика.");
                });
            }
        }

        function playOnFirstClick() {
            const aud = document.getElementById("audio");
            if(aud.paused) {
                toggleAudio();
            }
        }

        function toggleAudio(event) {
            if(event) event.stopPropagation(); // Чтобы не срабатывал playOnFirstClick дважды
            const aud = document.getElementById("audio"); 
            const btn = document.querySelector(".music-btn");
            
            if(aud.paused) { 
                aud.play().catch(error => console.log("Music play failed:", error)); 
                btn.classList.add("spin-music"); 
                btn.innerHTML = '<i class="fas fa-pause"></i>'; 
            }
            else { 
                aud.pause(); 
                btn.classList.remove("spin-music"); 
                btn.innerHTML = '<i class="fas fa-music"></i>'; 
            }
        }

        // --- GOOGLE SHEETS БӨЛІМІ ---
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLI0x9ApUm-69Jh6bdkolDFm7VrUSUwMhUVtEKDqhS_NvsNXQpb7URqFKwUU7IQvM/exec';

        const form = document.getElementById('rsvpForm');
        
        form.addEventListener('submit', e => {
            e.preventDefault();
            
            if(SCRIPT_URL.includes('СІЗДІҢ')) {
                alert("Google Script сілтемесін қойыңыз!");
                return;
            }

            document.getElementById('loader').style.display = 'block';
            document.getElementById('error-msg').style.display = 'none';
            form.style.display = 'none';

            fetch(SCRIPT_URL, { 
                method: 'POST', 
                body: new FormData(form)
            })
            .then(response => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('success-msg').style.display = 'block';
                document.getElementById('formTitle').style.display = 'none';
                
                // Тіркелгенін есте сақтау (Local Storage)
                localStorage.setItem('isSubmitted', 'true');
            })
            .catch(error => {
                console.error('Error!', error.message);
                document.getElementById('loader').style.display = 'none';
                document.getElementById('error-msg').style.display = 'block';
                form.style.display = 'block';
            });
        });
    </script>
</body>

</html>